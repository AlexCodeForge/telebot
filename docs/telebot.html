<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FutureLearn - Cursos del Mañana</title>
    
    <!-- Google Fonts: Manrope -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Estilos personalizados para una estética moderna */
        body {
            font-family: 'Manrope', sans-serif;
            background-color: #111827; /* Dark mode */
            color: #f9fafb;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .glass-effect {
            background: rgba(31, 41, 55, 0.6); /* bg-gray-800 con transparencia */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .gradient-text {
            background: linear-gradient(90deg, #a855f7, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .cta-button {
            background: linear-gradient(90deg, #a855f7, #f472b6);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.2);
        }
        .cta-button:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.3);
        }
        
        .product-card {
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }
        .product-card:hover {
            transform: translateY(-8px);
            border-color: rgba(168, 85, 247, 0.5);
        }

        /* Ocultar flechas en input de tipo número */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
          -webkit-appearance: none; 
          margin: 0; 
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="sticky top-0 z-50 glass-effect">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-extrabold tracking-tighter">Future<span class="gradient-text">Learn</span></h1>
            <button id="cart-button" class="relative">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-pink-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
            </button>
        </nav>
    </header>

    <main class="flex-grow container mx-auto px-6 py-12">
        <section class="text-center mb-16">
            <h2 class="text-5xl md:text-7xl font-extrabold tracking-tighter mb-4">Aprende el <span class="gradient-text">Futuro</span>.</h2>
            <p class="text-xl text-gray-400 max-w-2xl mx-auto">Cursos en video sobre IA, Web3 y más. Entregados al instante en tu Telegram.</p>
        </section>
        
        <section id="product-gallery" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Productos generados por JS -->
        </section>
    </main>
    
    <footer class="text-center w-full py-10 mt-10">
        <p class="text-sm text-gray-500">&copy; 2025 FutureLearn. La educación del mañana, hoy.</p>
    </footer>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
        <div id="modal-content" class="glass-effect rounded-2xl shadow-2xl w-full max-w-md overflow-hidden">
            <!-- Contenido del Modal generado por JS -->
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATOS DE EJEMPLO ---
        const products = [
            { id: 1, title: 'IA Generativa para Creativos', price: 49.99, thumbnail: 'https://placehold.co/600x400/a855f7/111827?text=IA' },
            { id: 2, title: 'Desarrollo de DApps con Solidity', price: 79.99, thumbnail: 'https://placehold.co/600x400/f472b6/111827?text=Web3' },
            { id: 3, title: 'Master en Bio-Impresión 3D', price: 99.50, thumbnail: 'https://placehold.co/600x400/84cc16/111827?text=Bio' },
        ];
        
        let cart = [];
        let checkoutStep = 1; // 1: Cart, 2: Payment, 3: Processing, 4: Success
        let telegramUsername = '';

        // --- ELEMENTOS DEL DOM ---
        const productGallery = document.getElementById('product-gallery');
        const cartButton = document.getElementById('cart-button');
        const checkoutModal = document.getElementById('checkout-modal');
        const modalContent = document.getElementById('modal-content');
        const cartCount = document.getElementById('cart-count');

        // --- FUNCIONES DE RENDERIZADO ---
        function renderProducts() {
            productGallery.innerHTML = products.map(product => `
                <div class="product-card bg-gray-900 rounded-2xl overflow-hidden flex flex-col">
                    <img src="${product.thumbnail}" alt="${product.title}" class="w-full h-56 object-cover">
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="text-2xl font-bold mb-2 text-gray-100">${product.title}</h3>
                        <p class="text-xl font-semibold gradient-text mb-6 mt-auto">$${product.price.toFixed(2)}</p>
                        <button data-product-id="${product.id}" class="add-to-cart-btn cta-button text-white font-bold py-3 px-4 rounded-lg w-full">
                            Añadir al Carrito
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function renderModal() {
            let content = '';
            switch (checkoutStep) {
                case 1: content = getCartView(); break;
                case 2: content = getPaymentView(); break;
                case 3: content = getProcessingView(); break;
                case 4: content = getSuccessView(); break;
            }
            modalContent.innerHTML = content;
            attachModalListeners();
        }

        // --- VISTAS DEL MODAL (SIMULACIÓN PASO A PASO) ---

        function getCartView() {
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            const cartItemsHTML = cart.length > 0 ? cart.map(item => `
                <div class="flex justify-between items-center py-3 border-b border-gray-700">
                    <span class="text-gray-300">${item.title}</span>
                    <span class="font-semibold text-gray-100">$${item.price.toFixed(2)}</span>
                </div>
            `).join('') : '<p class="text-gray-400 text-center py-4">Tu carrito está vacío.</p>';

            return `
                <div class="p-6 border-b border-gray-700 flex justify-between items-center">
                    <h3 class="text-2xl font-bold text-white">Tu Pedido</h3>
                    <button id="close-modal-btn" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
                <div class="p-6">${cartItemsHTML}</div>
                <div class="p-6 bg-gray-900/50">
                    <div class="flex justify-between items-center text-xl font-bold mb-4">
                        <span>Total:</span>
                        <span class="gradient-text">$${total.toFixed(2)}</span>
                    </div>
                    <input id="telegram-input" type="text" placeholder="@username de Telegram" class="w-full bg-gray-700 text-white rounded-lg p-3 mb-4 border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:outline-none" value="${telegramUsername}">
                    <button id="to-payment-btn" class="cta-button text-white font-bold py-3 px-6 rounded-lg w-full" ${cart.length === 0 ? 'disabled' : ''}>
                        Continuar al Pago
                    </button>
                </div>`;
        }
        
        function getPaymentView() {
            return `
                <div class="p-6 border-b border-gray-700 flex justify-between items-center">
                    <button id="back-to-cart-btn" class="text-gray-400 hover:text-white">&larr; Volver</button>
                    <h3 class="text-2xl font-bold text-white">Detalles de Pago</h3>
                    <button id="close-modal-btn" class="text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
                <div class="p-6">
                    <p class="text-sm text-gray-400 mb-4">Esto es una simulación. Puedes usar cualquier dato.</p>
                    <div class="space-y-4">
                        <input id="card-number" type="text" placeholder="Número de Tarjeta (ej: 4242 ...)" class="w-full bg-gray-700 text-white rounded-lg p-3 border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:outline-none">
                        <div class="flex space-x-4">
                            <input id="card-expiry" type="text" placeholder="MM/YY" class="w-1/2 bg-gray-700 text-white rounded-lg p-3 border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:outline-none">
                            <input id="card-cvc" type="text" placeholder="CVC" class="w-1/2 bg-gray-700 text-white rounded-lg p-3 border border-gray-600 focus:ring-2 focus:ring-purple-500 focus:outline-none">
                        </div>
                    </div>
                </div>
                <div class="p-6 bg-gray-900/50">
                    <button id="process-payment-btn" class="cta-button text-white font-bold py-3 px-6 rounded-lg w-full">
                        Pagar $${cart.reduce((s, i) => s + i.price, 0).toFixed(2)}
                    </button>
                </div>`;
        }

        function getProcessingView() {
            return `
                <div class="p-12 flex flex-col items-center justify-center">
                    <svg class="animate-spin h-12 w-12 text-purple-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <h3 class="text-2xl font-bold text-white">Procesando Pago...</h3>
                    <p class="text-gray-400">Por favor, espera.</p>
                </div>`;
        }
        
        function getSuccessView() {
            return `
                 <div class="p-8 text-center">
                    <div class="w-16 h-16 bg-green-500/20 rounded-full mx-auto flex items-center justify-center mb-4">
                       <svg class="w-10 h-10 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <h3 class="text-2xl font-bold text-white">¡Pago Exitoso!</h3>
                    <p class="text-gray-300 mt-2">Hemos enviado ${cart.length} curso(s) a tu cuenta de Telegram: <strong class="text-pink-400">${telegramUsername}</strong>.</p>
                    <p class="text-xs text-gray-500 mt-1">Recibirás un mensaje de nuestro bot en breve.</p>
                    <button id="close-modal-btn" class="mt-6 cta-button text-white font-bold py-2 px-8 rounded-lg">Cerrar</button>
                </div>`;
        }

        // --- LÓGICA DE EVENTOS ---
        function attachModalListeners() {
            const closeModalBtn = document.getElementById('close-modal-btn');
            if(closeModalBtn) closeModalBtn.addEventListener('click', closeModal);
            
            const toPaymentBtn = document.getElementById('to-payment-btn');
            if(toPaymentBtn) toPaymentBtn.addEventListener('click', () => {
                const input = document.getElementById('telegram-input');
                if (!input.value || !input.value.startsWith('@')) {
                    alert('Por favor, introduce un @username de Telegram válido.');
                    return;
                }
                telegramUsername = input.value;
                checkoutStep = 2;
                renderModal();
            });
            
            const backToCartBtn = document.getElementById('back-to-cart-btn');
            if(backToCartBtn) backToCartBtn.addEventListener('click', () => {
                checkoutStep = 1;
                renderModal();
            });

            const processPaymentBtn = document.getElementById('process-payment-btn');
            if (processPaymentBtn) processPaymentBtn.addEventListener('click', () => {
                // Validación simple
                if(!document.getElementById('card-number').value || !document.getElementById('card-expiry').value || !document.getElementById('card-cvc').value) {
                    alert('Por favor, rellena todos los campos de la tarjeta.');
                    return;
                }
                checkoutStep = 3;
                renderModal();
                // Simular procesamiento
                setTimeout(() => {
                    checkoutStep = 4;
                    renderModal();
                }, 2500);
            });
        }
        
        function updateCartCount() {
            cartCount.textContent = cart.length;
        }

        function addToCart(productId) {
            const productToAdd = products.find(p => p.id === productId);
            if (productToAdd && !cart.find(p => p.id === productId)) {
                cart.push(productToAdd);
                updateCartCount();
            } else {
                alert('Este producto ya está en tu carrito.');
            }
        }
        
        function openModal() {
            checkoutStep = 1;
            renderModal();
            checkoutModal.classList.remove('hidden');
        }

        function closeModal() {
            checkoutModal.classList.add('hidden');
            // Si el pago fue exitoso, resetea el carrito
            if (checkoutStep === 4) {
                cart = [];
                telegramUsername = '';
                updateCartCount();
            }
        }

        // --- INICIALIZACIÓN Y LISTENERS GLOBALES ---
        renderProducts();
        
        cartButton.addEventListener('click', openModal);
        
        productGallery.addEventListener('click', (e) => {
            if (e.target.classList.contains('add-to-cart-btn')) {
                const productId = parseInt(e.target.dataset.productId);
                addToCart(productId);
            }
        });
    });
    </script>
</body>
</html>
